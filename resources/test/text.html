<html>

<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>

<body onload="localStorage.setItem('name1','value1');">
	<button onclick="console.log(localStorage.getItem('name1'));">Click me!</button>
	<button onclick="window.location.href = 'index.html'" ;>Go to the other site</button>
	<button onclick="testConn();">Click me for ping test!</button>
	<button onclick="pingURL();">Click me for pingURL test!</button>
	<button onclick="loadDoc()">w3schools loadDoc</button>
	<p id="guinea-pig">Guinea pig</p>
	<label for="url">
		Enter the URL you want to ping:
	</label><br>

	<input type="text" id="url" name="url" style="margin: 10px;"><br>

	<input type="submit" value="Submit" onclick="pingURL()">
	<script>
		function setCookie(cname, cvalue, exdays) {
			const d = new Date();
			d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
			let expires = "expires=" + d.toUTCString();
			document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
		}
		function testConn() {
			var temp;

		}
		function pingURL() {

			// The custom URL entered by user
			var URL = $("#url").val();
			var settings = {

				// Defines the configurations
				// for the request
				cache: false,
				dataType: "jsonp",
				async: true,
				crossDomain: true,
				url: URL,
				method: "POST",
				headers: {
					accept: "application/json",
					"Access-Control-Allow-Origin": "*",
				},

				// Defines the response to be made
				// for certain status codes
				statusCode: {
					200: function (response) {
						console.log("Status 200: Page is up!");
						console.log("This is the body of the text:" + response.responseText);
					},
					400: function (response) {
						console.log("Status 400: Page is down.");
					},
					0: function (response) {
						console.log("Status 0: Page is down.");
					},
				},
			};

			// Sends the request and observes the response
			$.ajax(settings).done(function (response) {
				console.log(response);
			});
		}

		function loadDoc() {
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function () {
				if (this.readyState == 4 && this.status == 200) {
					myFunction(this);
				}
			};
			xhttp.open("GET", "test-file.xml", true);
			xhttp.send();
		}

		function myFunction(xml) {
			console.log(xml);
			var i;
			var xmlDoc = xml.responseXML;
			var x = xmlDoc.getElementsByTagName("textBlock");
			var output = "";
			var bold = false;
			for (i = 0; i < x.length; i++) {
				var dest = x[i].childNodes[1].childNodes[0].textContent;
				var date = x[i].childNodes[3].childNodes[0].textContent;
				var data = x[i].childNodes[5].childNodes[0].textContent;
				if (dest == "JEC") { bold = true; output += "<b>"; }
				if (dest == "homeMarquee") { continue; }
				// x[0].childNodes[1].childNodes[0] <== change the x[0] to change the textBlock, the childNodes[1] to either 1,3, or 5 for each block. Keep the last one the same.
				// output += "msg " + i + ": " + x[i].getElementsByTagName("msg")[0].childNodes[0].nodeValue + "<br>";
				output += dest + ": (" + date + ") " + data + "<br>";
				console.log("The child nodes of this msg is: " + x[i].getElementsByTagName("msg")[0].childNodes);
				if (bold) { output += "</b>"; bold = false; }
			}
			document.getElementById("guinea-pig").innerHTML = output;
		}
		// FROM W3SCHOOLS DIRECTLY
		// function myFunction(xml) {
		// 	var i;
		// 	var xmlDoc = xml.responseXML;
		// 	var table="<tr><th>Artist</th><th>Title</th></tr>";
		// 	var x = xmlDoc.getElementsByTagName("CD");
		// 	for (i = 0; i <x.length; i++) {
		// 		table += "<tr><td>" +
		// 		x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue +
		// 		"</td><td>" +
		// 		x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
		// 		"</td></tr>";
		// 	}
		// 	document.getElementById("demo").innerHTML = table;
		// }
	</script>
</body>

</html>